<main class="page">
  <header class="header">
    <div>
      <h1>Tic Tac Toe</h1>
      <p>Automated simulation via microservices</p>
    </div>
    <button class="primary" (click)="startSimulation()" [disabled]="isSimulating">
      {{ isSimulating ? "Simulating..." : "Start Simulation" }}
    </button>
  </header>

  <section class="status">
    <div class="status-item">
      <span class="label">Session</span>
      <span class="value">{{ sessionStatus || "-" }}</span>
    </div>
    <div class="status-item">
      <span class="label">Game</span>
      <span class="value">{{ gameStatus || "-" }}</span>
    </div>
    <div class="status-item">
      <span class="label">Session ID</span>
      <span class="value mono">{{ sessionId || "-" }}</span>
    </div>
    <div class="status-item">
      <span class="label">Game ID</span>
      <span class="value mono">{{ gameId || "-" }}</span>
    </div>
  </section>

  <section class="board">
    <div class="grid">
      <div class="row" *ngFor="let row of board; let rowIndex = index">
        <div class="cell-item" *ngFor="let col of row; let colIndex = index">
          {{ board[rowIndex][colIndex] }}
        </div>
      </div>
    </div>
  </section>

  <section class="info">
    <div class="panel">
      <h2>Move History</h2>
      <ul>
        <li *ngFor="let move of moves; let i = index">
          #{{ i + 1 }} - Player {{ move.player }} â†’ ({{ move.row }}, {{ move.column }})
        </li>
        <li *ngIf="moves.length === 0">No moves yet.</li>
      </ul>
    </div>

    <div class="panel">
      <h2>Live Updates</h2>
      <p>{{ lastMessage || "Waiting for updates..." }}</p>

      <div class="error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </div>
  </section>
</main>
